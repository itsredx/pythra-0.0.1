<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Dropdown Test</title>
    <!-- ADD SIMPLEBAR CSS -->
    <link rel="stylesheet" href="./js/scroll-bar/simplebar.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link id="base-stylesheet" type="text/css" rel="stylesheet" href="styles.css?v=1754749507">
    <style id="dynamic-styles">.shared-container-0 { box-sizing: border-box; }
.shared-container-4 { box-sizing: border-box; padding: 8px; width: 100vw; height: 100vh; }
.shared-column-1 { display: flex; flex-direction: column; justify-content: flex-start; align-items: center; height: 100%; direction: ltr; }
.shared-container-1 { box-sizing: border-box; background: lightpink; border-radius: 0.0px; padding: 0.0px 0.0px 0.0px 8px; width: 300px; height: 30px; }
.shared-center-0 { display: flex; justify-content: center; align-items: center; width: 100%; height: 100%;  }
.shared-row-0 { display: flex; flex-direction: row; justify-content: space-between; align-items: center; width: 100%; direction: ltr; }

            .shared-text-0 {
                margin: 0; /* Reset default paragraph margin */
                padding: 0;
                
                
                
            }
            
.shared-textbutton-0 { display: inline-flex; align-items: center; justify-content: center; border: none; cursor: pointer; text-align: center; text-decoration: none; outline: none; min-width: 48px; box-sizing: border-box; position: relative; overflow: hidden; transition: background-color 0.15s linear; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-color: transparent; border: none;}
.shared-textbutton-0 > * { font-weight: 500; font-size: 14px; letter-spacing: 0.1px; line-height: 20px; }
.shared-textbutton-0:hover { background-color: transparent; color: red; }
.shared-textbutton-0:active { background-color: rgba(0, 0, 0, 0.12); }
.shared-textbutton-0.disabled { color: rgba(0, 0, 0, 0.38); background-color: transparent; cursor: default; pointer-events: none; }

                .material-icon-0 {
                    position: relative;
                    font-family: 'Material Symbols Rounded';
                    font-weight: normal;
                    font-style: normal;
                    font-size: 24px;
                    line-height: 1;
                    letter-spacing: normal;
                    text-transform: none;
                    z-index: 100;
                    display: inline-block;
                    white-space: nowrap;
                    word-wrap: normal;
                    direction: ltr;
                    -webkit-font-smoothing: antialiased;
                    text-rendering: optimizeLegibility;
                    -moz-osx-font-smoothing: grayscale;
                    font-feature-settings: 'liga';
                    color: inherit;
                    font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24;
                }
            
.shared-container-3 { box-sizing: border-box; background: lightpink; border-radius: 0.0px; width: 300px; }
.shared-column-0 { display: flex; flex-direction: column; justify-content: flex-start; align-items: flex-start; height: 100%; direction: ltr; }
.shared-textbutton-1 { display: inline-flex; align-items: center; justify-content: center; border: none; cursor: pointer; text-align: center; text-decoration: none; outline: none; min-width: 48px; box-sizing: border-box; position: relative; overflow: hidden; transition: background-color 0.15s linear; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-color: transparent; padding: 0px; border: none;}
.shared-textbutton-1 > * { font-weight: 500; font-size: 14px; letter-spacing: 0.1px; line-height: 20px; }
.shared-textbutton-1:hover { background-color: transparent; color: red; }
.shared-textbutton-1:active { background-color: rgba(0, 0, 0, 0.12); }
.shared-textbutton-1.disabled { color: rgba(0, 0, 0, 0.38); background-color: transparent; cursor: default; pointer-events: none; }
.shared-container-2 { box-sizing: border-box; background: lightpink; border-radius: 8px; padding: 0.0px 8px; width: 300px; height: 30px; }</style>
    
        <script src="qwebchannel.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', () => {
                new QWebChannel(qt.webChannelTransport, (channel) => {
                    window.pywebview = channel.objects.pywebview;
                    console.log("PyWebChannel connected.");
                });
            });
            function handleClick(name) { if(window.pywebview) window.pywebview.on_pressed_str(name, ()=>{}); }
            function handleClickWithArgs(callback_name, ...args) {
                if (window.pywebview) {
                    console.log("index", args);
                    window.pywebview.on_pressed(callback_name, ...args).then(function(response) {
                        console.log(response);
                    }).catch(function(error) {
                        console.error(error);
                    });
                } else {
                    console.error('pywebview is not defined');
                }
            }
            function handleItemTap(name, index) { if(window.pywebview) window.pywebview.on_item_tap(name, index, ()=>{}); }
            function handleInput(name, value) {
                if(window.pywebview) {
                    window.pywebview.on_input_changed(name, value, ()=>{});
                }
            }
        </script>
        <script>
        function PythraSlider(elementId, options) {
    // The 'this' keyword refers to the new object being created.
    this.container = document.getElementById(elementId);
    if (!this.container) {
        console.error(`Slider container with ID #${elementId} not found.`);
        return;
    }

    console.log(`âœ… PythraSlider engine is initializing for #${elementId}`);

    this.options = options;

    // Find child elements
    this.track = this.container.querySelector('.slider-track');
    this.thumb = this.container.querySelector('.slider-thumb');
    
    // Bind 'this' context for event handlers
    this.handleDragStart = this.handleDragStart.bind(this);
    this.handleDragMove = this.handleDragMove.bind(this);
    this.handleDragEnd = this.handleDragEnd.bind(this);

    // Attach initial event listeners
    this.container.addEventListener('mousedown', this.handleDragStart);
    this.container.addEventListener('touchstart', this.handleDragStart, { passive: false }); // passive: false to allow preventDefault
}

PythraSlider.prototype.handleDragStart = function(event) {
    event.preventDefault();
    this.container.classList.add('active');
    
    document.addEventListener('mousemove', this.handleDragMove);
    document.addEventListener('mouseup', this.handleDragEnd);
    document.addEventListener('touchmove', this.handleDragMove);
    document.addEventListener('touchend', this.handleDragEnd);

    this.updatePosition(event);
};

PythraSlider.prototype.handleDragMove = function(event) {
    this.updatePosition(event);
};

PythraSlider.prototype.handleDragEnd = function() {
    this.container.classList.remove('active');
    
    document.removeEventListener('mousemove', this.handleDragMove);
    document.removeEventListener('mouseup', this.handleDragEnd);
    document.removeEventListener('touchmove', this.handleDragMove);
    document.removeEventListener('touchend', this.handleDragEnd);
};

PythraSlider.prototype.updatePosition = function(event) {
    if (!this.track) return;
    const rect = this.track.getBoundingClientRect();
    const clientX = event.touches ? event.touches[0].clientX : event.clientX;
    
    let positionX = clientX - rect.left;
    let percentage = (positionX / rect.width) * 100;
    
    percentage = Math.max(0, Math.min(100, percentage));
    
    this.container.style.setProperty('--slider-percentage', `${percentage}%`);
    
    const range = this.options.max - this.options.min;
    const newValue = this.options.min + (percentage / 100) * range;
    
    if (window.pywebview && this.options.onChangedName) {
        window.pywebview.on_drag_update(this.options.onChangedName, newValue);
    }
};

PythraSlider.prototype.destroy = function() {
    if (!this.container) return;
    this.container.removeEventListener('mousedown', this.handleDragStart);
    this.container.removeEventListener('touchstart', this.handleDragStart);
    this.handleDragEnd(); 
};
        </script>
        
</head>
<body>
    <div id="root-container"><div id="fw_id_1" class="shared-container-0" style="display: block"><div id="fw_id_2" class=""><div id="fw_id_3" class="shared-container-4" style="display: block"><div id="fw_id_4" class="shared-column-1"><div id="fw_id_5" class="shared-container-1" style="display: block"><div id="fw_id_6" class="shared-center-0"><div id="fw_id_7" class="shared-row-0"><p id="fw_id_8" class="shared-text-0">Option 2</p><button id="fw_id_9" class="shared-textbutton-0" onclick="handleClick('openDropDown')"><i id="fw_id_10" class="material-icon-0">arrow_drop_down</i></button></div></div></div><div id="fw_id_11" class="shared-container-3" style="display: none"><div id="fw_id_12" class="shared-column-0"><button id="fw_id_13" class="shared-textbutton-1" onclick="handleClick('changeOp1')"><div id="fw_id_14" class="shared-container-2" style="display: block"><div id="fw_id_15" class="shared-center-0"><div id="fw_id_16" class="shared-row-0"><p id="fw_id_17" class="shared-text-0">Option 1</p></div></div></div></button><button id="fw_id_18" class="shared-textbutton-1" onclick="handleClick('changeOp2')"><div id="fw_id_19" class="shared-container-2" style="display: block"><div id="fw_id_20" class="shared-center-0"><div id="fw_id_21" class="shared-row-0"><p id="fw_id_22" class="shared-text-0">Option 2</p></div></div></div></button><button id="fw_id_23" class="shared-textbutton-1" onclick="handleClick('changeOp3')"><div id="fw_id_24" class="shared-container-2" style="display: block"><div id="fw_id_25" class="shared-center-0"><div id="fw_id_26" class="shared-row-0"><p id="fw_id_27" class="shared-text-0">Option 3</p></div></div></div></button></div></div></div></div></div></div></div>
    <div id="overlay-container"></div>

    <!-- ADD SIMPLEBAR JS -->
    <script src="./js/virtualList.js"></script>
    <script src="./js/scroll-bar/simplebar.min.js"></script>
    <!-- ADD THE NEW SLIDER JS ENGINE -->
    
</body>
</html>